# 不同的循环子字符串

## 题意

给定字符串`S`，求`S`中形如AA的子串的个数。

这次无论是英文还是中文，题意都不是太明确，容易理解错题目。

## 思路

### 暴力

遍历出所有子串（`O(N^2)`），对每一个子串进行判断（`O(N)`），总的时间为`O(N^3)`。

虽然`N <= 2000`，`O(N^3)`一般不能AC。但事实证明测试数据较弱，能够AC，但很耗时。

### 字符串哈希

为了使判断时间降低到`O(1)`，可以对`S`求哈希前缀和`H`。那么对于任意一个子串（区间）`S[i:j]`，其哈希为`H[j] - H[i] * BASE ^ (j - i + 1)`，其中`BASE`为自定义基数。

举个例子：`abcbcd`。首先字母到数字的映射可以是：a-1、b-2、……、z-26，如果取基数为`10`，那么有：`H = [0, 1, 12, 123, 1232, 12323, 123234]`。

- 左边的`bc`的求法：123 - 1 * 100 = 23
- 右边的`bc`的求法：12323 - 123 + 100 = 23

发现对于`bcbc`这个子串来说，左半的哈希等于右半，说明它形如AA，则算一个。对于结果，最终还需要使用集合来去重。

字符串哈希，有几个注意点：

- 因为哈希数会很大，需要用`unsigned long long`类型来存储。
- 基数的选取：37、1e9 + 7……只要是大于26的质数即可（@todo 待研究）
