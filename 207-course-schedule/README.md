# 207. 课程表

## 题意

给定n门课程、以及它们的先决条件，问是否可能完成所有课程的学习？

## 思路

能完成的条件是“没有环”，因为课程A、B互为前提的话，就相当于死锁了，永远不可能完成。

所以问题转化为：在一个有向图中，判断是否有环。

判断是否有环，“拓扑排序”（Topological sort）是最常用的思路。1个有向无环图（DAG），存在至少1个拓扑排序。所以我们可以尝试求它的拓扑排序，如果失败了就表示图中存在环。而拓扑排序有2种实现方式：

BFS：

1. 入度为0的结点作为队列的初始结点。
1. 重复该过程直到队列为空：对于遍历到的每一个结点A，将其从图中撤销，即将A的所有后继结点的入度减1，并将入度变为0的结点作为新结点加入到队列中。
1. 如果累计结点数量A = N，则没有环，得到完整的拓扑排序；如果A < N，则有环存在。

DFS：需要给结点设置3种状态：未遍历(0)、正在遍历(1)、已遍历(2)

1. 遍历，对所有s=0的结点进行DFS。
1. 在对结点A的递归单元中：（代码也许表达得更好）
    1. 标记A正在遍历，即对A设置s=1
    1. 对A的所有s!=2的后继结点进行DFS，如果其中遇到了s=1的结点，表示有环
    1. 标记A已经遍历完，即对A设置s=2

无论DFS还是BFS，时间复杂度都是O(V + E)。

## 参考

- [C++ BFS/DFS](https://leetcode.com/problems/course-schedule/discuss/58509/C%2B%2B-BFSDFS)
