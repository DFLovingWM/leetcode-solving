# 最近公共祖先问题

## 定义

最近公共祖先问题（LCA：Lowest common ancestor），指的是在“树”中寻找某两个结点的最近的公共祖先。

## 解决方案

设两个结点为`a`、`b`。

1、求路径。有2种思路：

- 正向路径：一般需要使用DFS/BFS遍历树：从根结点出发，直到遇到目标结点，同时记录当前路径。如果是BST，那么路径是唯一确定的，可以不用搜索，直接用二分查找。
- 反向路径：对树进行预处理，也使用DFS/BFS遍历树，使用哈希表建立“结点 => 父结点”的映射。然后从目标结点出发，一直追溯到根结点，同时记录路径。

2、寻找。也有2种思路：

- 正向，使用双指针比较：分别从根结点开始，此时路径是“对齐”的，故可以两两比较，第一个不同点（表示分叉）的上一个点就是LCA。
- 反向，使用哈希表标记：分别从本结点开始，此时路径不是“对齐”的，无法进行比较，所以采用标记法：标记从`a`到根结点上所有结点，然后从`b`出发，遇到的第一个标记结点即为LCA。

## 题型

- [236. 二叉树的最近公共祖先](https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/)，模板题
- [235. 二叉搜索树的最近公共祖先](https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/)，在二叉树基础上进一步变为BST
- [1123. 最深叶节点的最近公共祖先](https://leetcode-cn.com/problems/lowest-common-ancestor-of-deepest-leaves/)，求多个结点的LCA，但这些结点因为处于同一个level/depth，所以是“对齐”的
- [5109. 最小公共区域](https://leetcode-cn.com/problems/smallest-common-region/)，不必再建树
- [160. 相交链表](https://leetcode-cn.com/problems/intersection-of-two-linked-lists/)，链表也是树
