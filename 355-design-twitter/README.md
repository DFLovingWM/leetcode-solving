# 355. 设计推特

## 题意

设计一个简单版的推特/朋友圈系统，满足以下几个API：

- `postTweet(userId, tweetId)`: 发推文
- `getNewsFeed(userId)`: 获取最近的10条推文，并按时间倒序输出。每个推文都必须是由此用户关注的人或者是用户自己发出的
- `follow(followerId, followeeId)`: 关注一个用户，注意有非法操作比如关注自己
- `unfollow(followerId, followeeId)`: 取关一个用户，注意也有非法操作

## 思路

有现实意义、也很有意思的一道题，而且并不难。

对象有：

- 用户（user）
- 推文（tweet）

对象之间的关系，从数据库的角度思考就是：

- user-tweet（用户与推文）是1-N关系，可以用`Map<User, List<Tweet>>`表示，这样可以通过O(1)时间获取某个用户发的所有推文。
- user-user（关注者-被关注者）是N-N关系，可以用多个`Map<User, Set<User>>`表示，用Set不用List是为了防止像“重复关注”这种非法操作，而且能够在O(1)时间内判断某用户是否被我关注（很棒吧？但题目不需要，哈哈）。

可知HashMap是基本需要。另外还需要考虑最重要的需求：获取最近的10条推文，并按时间倒序输出。更具体来说，是从我的推文列表、我关注的所有用户的推文列表中，挑出最新的10条推文。如果把1个用户的推文看成是一个“链表”，那么这个问题就变成：

> 合并N个有序链表

解法呼之欲出：维护一个`size <= N`的最“新”堆。时间复杂度为O(10logN)。
