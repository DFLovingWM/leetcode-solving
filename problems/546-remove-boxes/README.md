# 546. 移除盒子

## 题意

给定数组，每次可以连续删除`N`个相同数字，得到的分数为`N * N`。求最大分数。

## 思路

- 穷举（TLE）：每次遍历消除线段，直到数组为空为止。
- 动态规划：`(l,r)`不足以定义一个独立子问题，需要3维：`f(l, r, k)`表示[l, r]后面跟着`k`个`A[r]`的子数组被删除后能获取的最大分数。于是对于`f(l, r, k)`，有两种策略选择。设`r2`为`r`向左走到的最后一个数字等于`A[r]`的位置，右边有`k2`个相同数字：
  - 删除结尾的`k2+1`个相同数字(A[r])：`f(l, r2 - 1, 0) + (k2 + 1) * (k2 + 1)`
  - 如果中间存在与A[r]相同的数字A[i]，考虑先将`[i, r2-1]`这段子数组删除、以让它们连起来：`f(i+1, r2-1, 0) + f(l, i, k2+1)`

## 反思总结

这道题是DP中的难题。难点在于数组是会变化的（减少），定义可缓存的参数列表变得困难。很多人想到二维，想不到三维。
