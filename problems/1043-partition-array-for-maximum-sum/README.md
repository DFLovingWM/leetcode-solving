# 1043. 分隔数组以得到最大和

## 题意

给定数组`A`，将数组分割成若干个子数组，每个子数组的长度不超过`K`，并且子数组中的每个数字都变为其中的最大值。问整个数组的最大值之和是多少？

## 思路

分割的位置会影响之后的可分割的位置，这是一个动态规划问题。

设`dp[i]`表示前`i`个元素能达到的最大和。考虑到长度最大为`K`，那么`dp[i]`可以由`dp[i-K] ~ dp[i-1]`推导而来，即状态转移为：

`dp[i] = max( dp[j] + max(A[j:i]) * (i - j) )`，其中`i - K <= j <= i - 1`

PS.一开始我想着把区间最大值预处理出来，但时间复杂度是`O(N^2)`。后来发现这一步是没有必要的，因为通过将对`j`的遍历方向变为逆序，那么最大值可以同时求出来，时间复杂度是`O(NK)`，很明显后者更好。
