# 327. 区间和的个数

## 思路

### 归并排序

求出`S`的前缀和数组`P`，则`S(i,j) === P[j+1] - P[i]`，所以问题转化为：求`P`的逆序对数目。使用归并排序。

合并前的数个数的过程需要保证时间最多为`O(N)`：差用`D`表示，求`lower <= D <= upper`的个数，等于`D <= upper`的个数减去`D < lower`的个数。这一步，实在太妙！
