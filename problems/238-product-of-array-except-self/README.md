# 238. 除自身以外数组的乘积

## 题意

给定一个数组`nums`，返回一个除了自身的所有数字的积组成的数组。不能用除法，最好只使用O(1)空间。

## 思路

### 分析

最简单的做法是求出总的积P，然后对于nums[i]来说就是：`P / nums[i]`。但是题目不允许用除法，所以只能用乘法来解。

对于`nums[i]`来说，结果就是：`(nums[0] * nums[1] * ... * nums[i - 1]) * (nums[i + 1] * nums[i + 2] * ... * nums[nums.length - 1])`，即“前面所有数字的积”（记为A）乘以“后面所有数字的积”（记为B）。

### 时间优化

如果对于每一个数字，都naive地求A和B，时间就是O(N^2)了。而其实这里有重复的工作，可以进行预处理：求A可以用**前缀积**（表示每一个数字之前的乘积），求B可以用**后缀积**（同理，不过是逆序求），这样可以将总体时间复杂度降低到O(N)。

### 空间优化

题目提示空间可以从O(N)优化到O(1)，这意味着我们需要在结果数组中，同时求前缀积、后缀积。可以这样做：

1. 顺序求前缀积Ai。
2. 逆序求后缀积Bi，并且每一位都乘上之前求得的Ai。这样就得到结果数组了。
