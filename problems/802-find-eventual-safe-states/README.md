# 802. 找到最终的安全状态

## 题意

给定邻接表`graph`，求最终安全的所有结点。

## 思路

### 拓扑排序（BFS）

如果某个结点“最终安全”，则说明它无论如何都不会走进一个环中。而判断图中是否有环，可以使用拓扑排序；由于目标是求出所有不成环的结点，所以我们只要对该图进行一次拓扑排序，排序成功的结点是不成环的，剩余结点都是在某个环中的。

另外，因为没有出度的结点肯定不成环，它需要作为队列初始结点，所以我们需要建立逆向邻接表，然后再进行拓扑排序。

时间复杂度为`O(V + E)`。

### DFS

首先，每个结点存在3种状态：

- 0：未遍历
- 1：遍历中（在栈中）
- 2：已遍历

一开始每个结点状态都为“未遍历”。从每个结点`i`出发、进行DFS，如果存在一条分支成环，那么`dfs(i)`返回false，否则返回true。其中，成环的判断是：遇到“遍历中”的结点。

时间复杂度同上。

## 反思总结

有人认为这两种方法都属于“拓扑排序”，我觉得把二者归为“判断环是否存在”的两种解法会比较好。
