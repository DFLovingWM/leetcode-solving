# 170. Two sum：设计数据结构

## 题意

设计一个数据结构`TwoSum`，提供两种操作：

- add(n)：增加元素n。
- find(sum)：寻找和为sum的一对元素，返回是否存在。

## 思路

思路：

- Naive
  - add：O(1)
  - find：O(N^2)
- 双指针：需要维护一个有序列表，故有以下几种方案：
  - 有序数组：二分查找O(logN)、但是插入操作需要移动子数组O(N)，故有：
    - add：O(N)
    - find：O(N)
  - BST
    - add：O(logN)，当然最差为O(N)
    - find：需要通过中序遍历转化为数组，O(N)
- Hash
  - add：O(1)
  - find：O(N)

综上，最好的方法还是Hash法。由于find操作会多次调用（设为K），则总体复杂度为：O(NK)。

使用常数优化以降低耗时：如果存在重复元素，那么线性遍历时，其实可以跳过这些元素，这个方案在重复元素较多的情况下能取得很好的优化。具体数据：

- 常规：使用Set，耗时436ms
- 考虑重复元素的优化：使用Map记录次数，耗时264ms
