# 1361. 验证二叉树

## 题意

给定结点数`n`、左子结点映射`leftChild`以及右子结点映射`rightChild`，问这些结点是否能且只能构造一个有效的二叉树。

## 思路

观察给出的例子（例子很重要），可以总结出一个有效的二叉树必须满足：

1. 任意结点的入度最多为1（因为最多只有1个父结点），根结点入度为0
1. 不存在环
1. 有且只有一个根结点

所以检测算法是：

1. 求出所有结点的入度、同时检测是否存在入度大于1的结点，如果有则false
1. 拓扑排序（只需要初始化这一步，不需要迭代）
    1. 如果初始结点数为0，表示成环，则false
    1. 如果初始结点数大于1，表示根结点多于1个，则false
    1. 只有当初始结点数为1时，才true

这里有个思考题：检测环，为什么不需要完整的拓扑排序呢？因为对于一个二叉树来说，环的存在有两种情况：

- 根结点参与环：则根结点的入度大于1，它不再是根结点，对应情况2.1
- 根结点不参与环：因为每个非根结点的入度为1，如果有环就存在入度为2的非根结点，对应情况1

也就是说，在上面说的3个条件中，第2个条件已经包含在1、3中了。所以不需要再进行拓扑排序来检测环。
